{"ast":null,"code":"import { mergeProps as _mergeProps, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"wrapper-input\"\n};\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"custom-input__error\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"input\", _mergeProps(_ctx.$attrs, {\n    onBlur: _cache[0] || (_cache[0] = (...args) => $options.blurHandler && $options.blurHandler(...args)),\n    value: $props.modelValue,\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.updateValue && $options.updateValue(...args)),\n    class: [\"custom-input\", !$data.isValid && 'custom-input--error']\n  }), null, 16 /* FULL_PROPS */, _hoisted_2), !$data.isValid ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_mergeProps","_ctx","$attrs","onBlur","_cache","args","$options","blurHandler","value","$props","modelValue","onInput","updateValue","$data","isValid","_hoisted_2","_hoisted_3","_toDisplayString","error","_createCommentVNode"],"sources":["/Users/andrew/Documents/DOC/IT/Репозиторії/my-Vue-app/src/components/shared/CustomInput.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper-input\">\n    <input\n      v-bind=\"$attrs\"\n      @blur=\"blurHandler\"\n      :value=\"modelValue\"\n      @input=\"updateValue\"\n      class=\"custom-input\"\n      :class=\"!isValid && 'custom-input--error'\"\n    />\n    <span v-if=\"!isValid\" class=\"custom-input__error\">{{ error }}</span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'CustomInput',\n  data() {\n    return {\n      isValid: true,\n      error: '',\n      isFirstInput: true,\n    };\n  },\n  inject: {\n    form: {\n      default: null,\n    },\n  },\n  inheritAttrs: false,\n  props: {\n    modelValue: {\n      type: String,\n      default: '',\n    },\n    errorMessage: {\n      type: String,\n      default: '',\n    },\n    rules: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  computed: {\n    attrs() {\n      return {\n        ...this.$attrs,\n        input: (event) => this.updateValue(event),\n      };\n    },\n  },\n  watch: {\n    modelValue() {\n      if (this.isFirstInput) return;\n      this.validate();\n    },\n  },\n  mounted() {\n    if (!this.form) return;\n    this.form.registerInput(this);\n  },\n  beforeUnmount() {\n    if (!this.form) return;\n    this.form.unRegisterInput(this);\n  },\n  methods: {\n    validate() {\n      this.isValid = this.rules.every((rule) => {\n        const { hasPassed, message } = rule(this.modelValue);\n        if (!hasPassed) {\n          this.error = message || this.errorMessage;\n        }\n        return hasPassed;\n      });\n      return this.isValid;\n    },\n    blurHandler() {\n      if (this.isFirstInput) {\n        this.validate();\n      }\n      this.isFirstInput = false;\n    },\n    updateValue(event) {\n      this.$emit('update:modelValue', event.target.value);\n    },\n    reset() {\n      this.isFirstInput = true;\n      this.isValid = true;\n      this.$emit('update:modelValue', '');\n    },\n  },\n};\n</script>"],"mappings":";;EACOA,KAAK,EAAC;AAAe;mBAD5B;;EAAAC,GAAA;EAU0BD,KAAK,EAAC;;;uBAT9BE,mBAAA,CAUM,OAVNC,UAUM,GATJC,mBAAA,CAOE,SAPFC,WAAA,CAOEC,IANQ,CAAAC,MAAM;IACbC,MAAI,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IACjBG,KAAK,EAAEC,MAAA,CAAAC,UAAU;IACjBC,OAAK,EAAAP,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAM,WAAA,IAAAN,QAAA,CAAAM,WAAA,IAAAP,IAAA,CAAW;IACnBV,KAAK,GAAC,cAAc,GACXkB,KAAA,CAAAC,OAAO;iCARtBC,UAAA,G,CAUiBF,KAAA,CAAAC,OAAO,I,cAApBjB,mBAAA,CAAoE,QAApEmB,UAAoE,EAAAC,gBAAA,CAAfJ,KAAA,CAAAK,KAAK,oBAV9DC,mBAAA,e"},"metadata":{},"sourceType":"module","externalDependencies":[]}