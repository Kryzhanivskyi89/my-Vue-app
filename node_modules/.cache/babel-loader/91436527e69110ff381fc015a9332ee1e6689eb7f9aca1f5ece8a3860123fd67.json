{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_MainTitle = _resolveComponent(\"MainTitle\");\n  const _component_CustomInput = _resolveComponent(\"CustomInput\");\n  const _component_Button = _resolveComponent(\"Button\");\n  const _component_Form = _resolveComponent(\"Form\");\n  const _component_AuthContainer = _resolveComponent(\"AuthContainer\");\n  return _openBlock(), _createBlock(_component_AuthContainer, {\n    class: \"login\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_MainTitle, {\n      class: \"login__title\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Логин\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_Form, {\n      ref: \"form\",\n      class: \"login__form\",\n      onSubmit: _withModifiers($options.handleSubmit, [\"prevent\"])\n    }, {\n      default: _withCtx(() => [_createVNode(_component_CustomInput, {\n        modelValue: $data.formData.email,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.formData.email = $event),\n        placeholder: \"Email\",\n        autocomplete: \"email\",\n        name: \"email\",\n        rules: $options.emailRules,\n        class: \"login__input\"\n      }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), _createVNode(_component_CustomInput, {\n        modelValue: $data.formData.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.formData.password = $event),\n        placeholder: \"Password\",\n        autocomplete: \"current-password\",\n        type: \"password\",\n        name: \"password\",\n        rules: $options.passwordRules,\n        class: \"login__input\"\n      }, null, 8 /* PROPS */, [\"modelValue\", \"rules\"]), _createVNode(_component_Button, {\n        class: \"login__btn\",\n        type: \"submit\",\n        loading: $data.loading\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Вход\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"loading\"])]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onSubmit\"])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_AuthContainer","class","default","_withCtx","_createVNode","_component_MainTitle","_createTextVNode","_","_component_Form","ref","onSubmit","_withModifiers","$options","handleSubmit","_component_CustomInput","modelValue","$data","formData","email","_cache","$event","placeholder","autocomplete","name","rules","emailRules","password","type","passwordRules","_component_Button","loading"],"sources":["/Users/andrew/Documents/DOC/IT/Репозиторії/vue/vue-app/src/components/auth/login/index.vue"],"sourcesContent":["<template>\n  <AuthContainer class=\"login\">\n    <MainTitle class=\"login__title\">Логин</MainTitle>\n    <Form ref=\"form\" class=\"login__form\" @submit.prevent=\"handleSubmit\">\n      <CustomInput\n        v-model=\"formData.email\"\n        placeholder=\"Email\"\n        autocomplete=\"email\"\n        name=\"email\"\n        :rules=\"emailRules\"\n        class=\"login__input\"\n      />\n      <CustomInput\n        v-model=\"formData.password\"\n        placeholder=\"Password\"\n        autocomplete=\"current-password\"\n        type=\"password\"\n        name=\"password\"\n        :rules=\"passwordRules\"\n        class=\"login__input\"\n      />\n      <Button class=\"login__btn\" type=\"submit\" :loading=\"loading\">Вход</Button>\n    </Form>\n  </AuthContainer>\n</template>\n\n<script>\nimport Form from '../../shared/form';\nimport CustomInput from '../../shared/CustomInput';\nimport Button from '../../shared/Button';\nimport AuthContainer from '../AuthContainer';\nimport MainTitle from '../../shared/MainTitle';\nimport {\n  emailValidation,\n  passwordValidation,\n  isRequired,\n} from '../../../utils/validationRules';\nimport { mapActions } from 'vuex';\n\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'Login',\n  components: {\n    Form,\n    CustomInput,\n    Button,\n    AuthContainer,\n    MainTitle,\n  },\n  data() {\n    return {\n      loading: false,\n      formData: {\n        email: '',\n        password: '',\n      },\n    };\n  },\n  computed: {\n    rules() {\n      return {\n        emailValidation,\n        passwordValidation,\n        isRequired,\n      };\n    },\n    emailRules() {\n      return [this.rules.isRequired, this.rules.emailValidation];\n    },\n    passwordRules() {\n      return [this.rules.isRequired];\n    },\n  },\n  methods: {\n    ...mapActions('auth', ['login']),\n    async handleSubmit() {\n      const { form } = this.$refs;\n      const isFormValid = form.validate();\n\n      if (isFormValid) {\n        try {\n          this.loading = true;\n          await this.login(this.formData);\n\n          this.$router.push({ name: 'homepage' });\n          form.reset();\n        } catch (error) {\n          this.$notify({\n            type: 'error',\n            title: 'Произошла ошибка',\n            text: error.message,\n          });\n        } finally {\n          this.loading = false;\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.login {\n  &__form {\n    display: block;\n    flex-direction: column;\n  }\n\n  &__title {\n    text-align: center;\n  }\n\n  &__input {\n    margin-bottom: 20px;\n    width: 100%;\n  }\n\n  &__btn {\n    margin-top: 15px;\n    width: 100%;\n  }\n}\n</style>\n"],"mappings":";;;;;;;uBACEA,YAAA,CAsBgBC,wBAAA;IAtBDC,KAAK,EAAC;EAAO;IAD9BC,OAAA,EAAAC,QAAA,CAEI,MAAiD,CAAjDC,YAAA,CAAiDC,oBAAA;MAAtCJ,KAAK,EAAC;IAAc;MAFnCC,OAAA,EAAAC,QAAA,CAEoC,MAAK,CAFzCG,gBAAA,CAEoC,OAAK,E;MAFzCC,CAAA;QAGIH,YAAA,CAmBOI,eAAA;MAnBDC,GAAG,EAAC,MAAM;MAACR,KAAK,EAAC,aAAa;MAAES,QAAM,EAHhDC,cAAA,CAG0DC,QAAA,CAAAC,YAAY;;MAHtEX,OAAA,EAAAC,QAAA,CAIM,MAOE,CAPFC,YAAA,CAOEU,sBAAA;QAXRC,UAAA,EAKiBC,KAAA,CAAAC,QAAQ,CAACC,KAAK;QAL/B,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAKiBJ,KAAA,CAAAC,QAAQ,CAACC,KAAK,GAAAE,MAAA;QACvBC,WAAW,EAAC,OAAO;QACnBC,YAAY,EAAC,OAAO;QACpBC,IAAI,EAAC,OAAO;QACXC,KAAK,EAAEZ,QAAA,CAAAa,UAAU;QAClBxB,KAAK,EAAC;wDAERG,YAAA,CAQEU,sBAAA;QApBRC,UAAA,EAaiBC,KAAA,CAAAC,QAAQ,CAACS,QAAQ;QAblC,uBAAAP,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAaiBJ,KAAA,CAAAC,QAAQ,CAACS,QAAQ,GAAAN,MAAA;QAC1BC,WAAW,EAAC,UAAU;QACtBC,YAAY,EAAC,kBAAkB;QAC/BK,IAAI,EAAC,UAAU;QACfJ,IAAI,EAAC,UAAU;QACdC,KAAK,EAAEZ,QAAA,CAAAgB,aAAa;QACrB3B,KAAK,EAAC;wDAERG,YAAA,CAAyEyB,iBAAA;QAAjE5B,KAAK,EAAC,YAAY;QAAC0B,IAAI,EAAC,QAAQ;QAAEG,OAAO,EAAEd,KAAA,CAAAc;;QArBzD5B,OAAA,EAAAC,QAAA,CAqBkE,MAAI,CArBtEG,gBAAA,CAqBkE,MAAI,E;QArBtEC,CAAA;;MAAAA,CAAA;;IAAAA,CAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}