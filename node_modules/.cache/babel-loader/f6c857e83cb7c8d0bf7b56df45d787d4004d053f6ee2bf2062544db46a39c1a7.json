{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Form from '../../shared/form';\nimport CustomInput from '../../shared/CustomInput';\nimport Button from '../../shared/Button';\nimport AuthContainer from '../AuthContainer';\nimport MainTitle from '../../shared/MainTitle';\nimport { emailValidation, passwordValidation, isRequired } from '../../../utils/validationRules';\nimport { mapActions } from 'vuex';\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'Registration',\n  components: {\n    Form,\n    CustomInput,\n    Button,\n    AuthContainer,\n    MainTitle\n  },\n  data() {\n    return {\n      loading: false,\n      formData: {\n        name: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      }\n    };\n  },\n  computed: {\n    rules() {\n      return {\n        emailValidation,\n        passwordValidation,\n        isRequired\n      };\n    },\n    nameRules() {\n      return [this.rules.isRequired];\n    },\n    emailRules() {\n      return [this.rules.isRequired, this.rules.emailValidation];\n    },\n    passwordRules() {\n      return [this.rules.isRequired, this.rules.passwordValidation];\n    },\n    confirmPassword() {\n      return [val => ({\n        hasPassed: val === this.formData.password,\n        message: 'Пароли не совпадают'\n      })];\n    }\n  },\n  methods: {\n    ...mapActions('auth', ['registerUser']),\n    async handleSubmit() {\n      const {\n        form\n      } = this.$refs;\n      const isFormValid = form.validate();\n      const {\n        name,\n        password,\n        email\n      } = this.formData;\n      console.log(this.formData);\n      if (isFormValid) {\n        try {\n          this.loading = true;\n          await this.registerUser({\n            name,\n            password,\n            email\n          });\n          this.$router.push({\n            name: 'homepage'\n          });\n          form.reset();\n        } catch (error) {\n          this.$notify({\n            type: 'error',\n            title: 'Произошла ошибка',\n            text: error.message\n          });\n        } finally {\n          this.loading = false;\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["Form","CustomInput","Button","AuthContainer","MainTitle","emailValidation","passwordValidation","isRequired","mapActions","name","components","data","loading","formData","email","password","confirmPassword","computed","rules","nameRules","emailRules","passwordRules","val","hasPassed","message","methods","handleSubmit","form","$refs","isFormValid","validate","console","log","registerUser","$router","push","reset","error","$notify","type","title","text"],"sources":["/Users/andrew/Documents/DOC/IT/Репозиторії/my-Vue-app/src/components/auth/registration/index.vue"],"sourcesContent":["<template>\n  <AuthContainer class=\"registration\">\n    <MainTitle class=\"registration__title\">Регистрация</MainTitle>\n    <Form ref=\"form\" class=\"registration__form\" @submit.prevent=\"handleSubmit\">\n      <CustomInput\n        v-model=\"formData.name\"\n        placeholder=\"Name\"\n        autocomplete=\"username\"\n        name=\"name\"\n        :rules=\"nameRules\"\n        class=\"registration__input\"\n      />\n      <CustomInput\n        v-model=\"formData.email\"\n        placeholder=\"Email\"\n        autocomplete=\"email\"\n        name=\"email\"\n        :rules=\"emailRules\"\n        class=\"registration__input\"\n      />\n      <CustomInput\n        v-model=\"formData.password\"\n        placeholder=\"Password\"\n        autocomplete=\"current-password\"\n        type=\"password\"\n        name=\"password\"\n        :rules=\"passwordRules\"\n        class=\"registration__input\"\n      />\n      <CustomInput\n        v-model=\"formData.confirmPassword\"\n        placeholder=\"Confirm password\"\n        autocomplete=\"current-password\"\n        type=\"password\"\n        name=\"confirmPassword\"\n        :rules=\"confirmPassword\"\n        class=\"registration__input\"\n      />\n      <Button class=\"registration__btn\" type=\"submit\" :loading=\"loading\"\n        >Вход</Button\n      >\n    </Form>\n  </AuthContainer>\n</template>\n\n<script>\nimport Form from '../../shared/form';\nimport CustomInput from '../../shared/CustomInput';\nimport Button from '../../shared/Button';\nimport AuthContainer from '../AuthContainer';\nimport MainTitle from '../../shared/MainTitle';\nimport {\n  emailValidation,\n  passwordValidation,\n  isRequired,\n} from '../../../utils/validationRules';\nimport { mapActions } from 'vuex';\n\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'Registration',\n  components: {\n    Form,\n    CustomInput,\n    Button,\n    AuthContainer,\n    MainTitle,\n  },\n  data() {\n    return {\n      loading: false,\n      formData: {\n        name: '',\n        email: '',\n        password: '',\n        confirmPassword: '',\n      },\n    };\n  },\n  computed: {\n    rules() {\n      return {\n        emailValidation,\n        passwordValidation,\n        isRequired,\n      };\n    },\n    nameRules() {\n      return [this.rules.isRequired];\n    },\n    emailRules() {\n      return [this.rules.isRequired, this.rules.emailValidation];\n    },\n    passwordRules() {\n      return [this.rules.isRequired, this.rules.passwordValidation];\n    },\n    confirmPassword() {\n      return [\n        (val) => ({\n          hasPassed: val === this.formData.password,\n          message: 'Пароли не совпадают',\n        }),\n      ];\n    },\n  },\n  methods: {\n    ...mapActions('auth', ['registerUser']),\n    async handleSubmit() {\n      const { form } = this.$refs;\n      const isFormValid = form.validate();\n      const { name, password, email } = this.formData;\n      console.log(this.formData)\n      if (isFormValid) {\n        try {\n          this.loading = true;\n\n          await this.registerUser({\n            name,\n            password,\n            email,\n          });\n\n          this.$router.push({ name: 'homepage' });\n          form.reset();\n        } catch (error) {\n          this.$notify({\n            type: 'error',\n            title: 'Произошла ошибка',\n            text: error.message,\n          });\n        } finally {\n          this.loading = false;\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.registration {\n  &__form {\n    display: block;\n    flex-direction: column;\n  }\n\n  &__title {\n    text-align: center;\n  }\n\n  &__input {\n    margin-bottom: 20px;\n    width: 100%;\n  }\n\n  &__btn {\n    margin-top: 15px;\n    width: 100%;\n  }\n}\n</style>\n"],"mappings":";AA8CA,OAAOA,IAAG,MAAO,mBAAmB;AACpC,OAAOC,WAAU,MAAO,0BAA0B;AAClD,OAAOC,MAAK,MAAO,qBAAqB;AACxC,OAAOC,aAAY,MAAO,kBAAkB;AAC5C,OAAOC,SAAQ,MAAO,wBAAwB;AAC9C,SACEC,eAAe,EACfC,kBAAkB,EAClBC,UAAU,QACL,gCAAgC;AACvC,SAASC,UAAS,QAAS,MAAM;AAEjC,eAAe;EACb;EACAC,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IACVV,IAAI;IACJC,WAAW;IACXC,MAAM;IACNC,aAAa;IACbC;EACF,CAAC;EACDO,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,KAAK;MACdC,QAAQ,EAAE;QACRJ,IAAI,EAAE,EAAE;QACRK,KAAK,EAAE,EAAE;QACTC,QAAQ,EAAE,EAAE;QACZC,eAAe,EAAE;MACnB;IACF,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,KAAKA,CAAA,EAAG;MACN,OAAO;QACLb,eAAe;QACfC,kBAAkB;QAClBC;MACF,CAAC;IACH,CAAC;IACDY,SAASA,CAAA,EAAG;MACV,OAAO,CAAC,IAAI,CAACD,KAAK,CAACX,UAAU,CAAC;IAChC,CAAC;IACDa,UAAUA,CAAA,EAAG;MACX,OAAO,CAAC,IAAI,CAACF,KAAK,CAACX,UAAU,EAAE,IAAI,CAACW,KAAK,CAACb,eAAe,CAAC;IAC5D,CAAC;IACDgB,aAAaA,CAAA,EAAG;MACd,OAAO,CAAC,IAAI,CAACH,KAAK,CAACX,UAAU,EAAE,IAAI,CAACW,KAAK,CAACZ,kBAAkB,CAAC;IAC/D,CAAC;IACDU,eAAeA,CAAA,EAAG;MAChB,OAAO,CACJM,GAAG,KAAM;QACRC,SAAS,EAAED,GAAE,KAAM,IAAI,CAACT,QAAQ,CAACE,QAAQ;QACzCS,OAAO,EAAE;MACX,CAAC,CAAC,CACH;IACH;EACF,CAAC;EACDC,OAAO,EAAE;IACP,GAAGjB,UAAU,CAAC,MAAM,EAAE,CAAC,cAAc,CAAC,CAAC;IACvC,MAAMkB,YAAYA,CAAA,EAAG;MACnB,MAAM;QAAEC;MAAK,IAAI,IAAI,CAACC,KAAK;MAC3B,MAAMC,WAAU,GAAIF,IAAI,CAACG,QAAQ,CAAC,CAAC;MACnC,MAAM;QAAErB,IAAI;QAAEM,QAAQ;QAAED;MAAM,IAAI,IAAI,CAACD,QAAQ;MAC/CkB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACnB,QAAQ;MACzB,IAAIgB,WAAW,EAAE;QACf,IAAI;UACF,IAAI,CAACjB,OAAM,GAAI,IAAI;UAEnB,MAAM,IAAI,CAACqB,YAAY,CAAC;YACtBxB,IAAI;YACJM,QAAQ;YACRD;UACF,CAAC,CAAC;UAEF,IAAI,CAACoB,OAAO,CAACC,IAAI,CAAC;YAAE1B,IAAI,EAAE;UAAW,CAAC,CAAC;UACvCkB,IAAI,CAACS,KAAK,CAAC,CAAC;QACd,EAAE,OAAOC,KAAK,EAAE;UACd,IAAI,CAACC,OAAO,CAAC;YACXC,IAAI,EAAE,OAAO;YACbC,KAAK,EAAE,kBAAkB;YACzBC,IAAI,EAAEJ,KAAK,CAACb;UACd,CAAC,CAAC;QACJ,UAAU;UACR,IAAI,CAACZ,OAAM,GAAI,KAAK;QACtB;MACF;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}