{"ast":null,"code":"import { toHandlers as _toHandlers, mergeProps as _mergeProps, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-4b0a529f\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"wrapper-input\"\n};\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"custom-input__error\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"input\", _mergeProps(_toHandlers($options.listeners, true), _ctx.$attrs, {\n    onBlur: _cache[0] || (_cache[0] = (...args) => $options.blurHandler && $options.blurHandler(...args)),\n    value: $props.value,\n    class: [\"custom-input\", !$data.isValid && 'custom-input--error']\n  }), null, 16 /* FULL_PROPS */, _hoisted_2), !$data.isValid ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_mergeProps","_toHandlers","$options","listeners","_ctx","$attrs","onBlur","_cache","args","blurHandler","value","$props","$data","isValid","_hoisted_2","_hoisted_3","_toDisplayString","error","_createCommentVNode"],"sources":["/Users/andrew/Documents/DOC/IT/Репозиторії/vue/vue-app/src/components/shared/CustomInput.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper-input\">\n    <input\n      v-on=\"listeners\"\n      v-bind=\"$attrs\"\n      @blur=\"blurHandler\"\n      :value=\"value\"\n      class=\"custom-input\"\n      :class=\"!isValid && 'custom-input--error'\"\n    />\n    <span v-if=\"!isValid\" class=\"custom-input__error\">{{ error }}</span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'CustomInput',\n  data() {\n    return {\n      isValid: true,\n      error: '',\n      isFirstInput: true,\n    };\n  },\n  inject: {\n    form: {\n      default: null,\n    },\n  },\n  inheritAttrs: false,\n  props: {\n    value: {\n      type: String,\n      default: '',\n    },\n    errorMessage: {\n      type: String,\n      default: '',\n    },\n    rules: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  computed: {\n    listeners() {\n      return {\n        // eslint-disable-next-line vue/no-deprecated-dollar-listeners-api\n        ...this.$listeners,\n        input: (event) => this.$emit('input', event.target.value),\n      };\n    },\n  },\n  watch: {\n    value() {\n      if (this.isFirstInput) return;\n\n      this.validate();\n    },\n  },\n  mounted() {\n    if (!this.form) return;\n\n    this.form.registerInput(this);\n  },\n  beforeDestroy() {\n    if (!this.form) return;\n\n    this.form.unRegisterInput(this);\n  },\n  methods: {\n    validate() {\n      this.isValid = this.rules.every((rule) => {\n        const { hasPassed, message } = rule(this.value);\n\n        if (!hasPassed) {\n          this.error = message || this.errorMessage;\n        }\n\n        return hasPassed;\n      });\n\n      return this.isValid;\n    },\n    blurHandler() {\n      if (this.isFirstInput) {\n        this.validate();\n      }\n\n      this.isFirstInput = false;\n    },\n    reset() {\n      this.isFirstInput = true;\n      this.isValid = true;\n      this.$emit('input', '');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/scss/variables';\n\n.wrapper-input {\n  position: relative;\n  display: inline-flex;\n}\n\n.custom-input {\n  height: 40px;\n  width: 100%;\n  border: 2px solid $main-color;\n  font-size: 18px;\n  outline: none;\n  line-height: inherit;\n  padding: 8px 15px;\n\n  &::placeholder {\n    color: inherit;\n  }\n\n  &--error {\n    border-color: red;\n  }\n\n  &__error {\n    position: absolute;\n    top: 100%;\n    right: 0;\n    width: 100%;\n    font-size: 12px;\n    color: red;\n    line-height: 1.3;\n  }\n}\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAe;mBAD5B;;EAAAC,GAAA;EAU0BD,KAAK,EAAC;;;uBAT9BE,mBAAA,CAUM,OAVNC,UAUM,GATJC,mBAAA,CAOE,SAPFC,WAAA,CAOEC,WANA,CAAgBC,QAAV,CAAAC,SAAS,SACPC,IAAA,CAAAC,MAAM;IACbC,MAAI,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEN,QAAA,CAAAO,WAAA,IAAAP,QAAA,CAAAO,WAAA,IAAAD,IAAA,CAAW;IACjBE,KAAK,EAAEC,MAAA,CAAAD,KAAK;IACbf,KAAK,GAAC,cAAc,GACXiB,KAAA,CAAAC,OAAO;iCARtBC,UAAA,G,CAUiBF,KAAA,CAAAC,OAAO,I,cAApBhB,mBAAA,CAAoE,QAApEkB,UAAoE,EAAAC,gBAAA,CAAfJ,KAAA,CAAAK,KAAK,oBAV9DC,mBAAA,e"},"metadata":{},"sourceType":"module","externalDependencies":[]}